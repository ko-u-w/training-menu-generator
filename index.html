<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>筋トレメニュー生成</title>

<style>
:root {
  --bg: #f1f5f9;
  --card: #ffffff;
  --primary: #3b82f6;
  --primary-soft: #dbeafe;
  --accent: #22c55e;
  --border: #cbd5e1;
  --text: #0f172a;
  --muted: #475569;
}

body {
  font-family: sans-serif;
  background: var(--bg);
  padding: 20px;
  color: var(--text);
}

h1, h2, h3 {
  color: var(--text);
}

.lead {
  font-size: 16px;
  color: var(--muted);
  margin-bottom: 20px;
}

.form-section {
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 16px;
  margin-bottom: 20px;
  background: var(--card);
  max-width: 420px;
}

.form-section legend {
  font-weight: bold;
  padding: 0 8px;
  color: var(--primary);
}

.form-row {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
}

.form-row label {
  width: 120px;
}

.form-row input,
.form-row select {
  flex: 1;
  padding: 6px;
  border-radius: 6px;
  border: 1px solid var(--border);
}

button {
  padding: 10px 16px;
  font-size: 16px;
  cursor: pointer;
  border-radius: 8px;
  border: none;
  background: var(--primary);
  color: #fff;
  margin-right: 8px;
}

button:hover {
  opacity: 0.9;
}

.step { display: none; }
.step.active { display: block; }

.ad-space {
  height: 90px;
  background: var(--primary-soft);
  margin: 30px 0;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--primary);
}

#result { margin-top: 30px; }

.day-card {
  background: var(--card);
  border-radius: 10px;
  padding: 15px;
  margin-bottom: 20px;
  border-left: 6px solid var(--accent);
}

.part-title {
  font-weight: bold;
  margin-top: 10px;
  color: var(--primary);
}

.history-card {
  background: var(--card);
  border: 1px solid var(--border);
  padding: 12px;
  margin-bottom: 16px;
  border-radius: 8px;
}

.history-header {
  font-weight: bold;
  cursor: pointer;
}

.history-body {
  white-space: pre-wrap;
  font-family: monospace;
  display: none;
  margin-top: 8px;
}

.history-actions {
  display: none;
  gap: 10px;
  margin-top: 10px;
}

.history-card.open .history-body,
.history-card.open .history-actions {
  display: block;
}

.fixed-generate { display: none; }

@media (max-width: 600px) {
  .form-row {
    flex-direction: column;
    align-items: flex-start;
  }

  .form-row label {
    width: auto;
    margin-bottom: 4px;
  }

  .fixed-generate {
    display: block;
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: var(--card);
    border-top: 1px solid var(--border);
    padding: 10px;
    text-align: center;
    z-index: 1000;
  }

  .fixed-generate button {
    width: 90%;
    font-size: 18px;
  }

  body {
    padding-bottom: 90px;
  }
}
</style>
</head>

<body>

<h1>筋トレメニュー生成</h1>
<p class="lead">
  身長・体重・年齢を入力するだけで、<br>
  あなた専用の筋トレメニューを自動生成します。
</p>

<div class="ad-space">広告エリア</div>

<div class="step active" id="step1">
  <fieldset class="form-section">
    <legend>基本情報</legend>
    <div class="form-row"><label>身長</label><input id="height" type="number"></div>
    <div class="form-row"><label>体重</label><input id="weight" type="number"></div>
    <div class="form-row"><label>年齢</label><input id="age" type="number"></div>
    <div class="form-row">
      <label>性別</label>
      <select id="gender">
        <option value="male">男</option>
        <option value="female">女</option>
      </select>
    </div>
  </fieldset>
  <button onclick="goStep(2)">次へ</button>
</div>

<div class="step" id="step2">
  <fieldset class="form-section">
    <legend>トレーニング条件</legend>
    <div class="form-row">
      <label>レベル</label>
      <select id="level">
        <option value="beginner">初心者</option>
        <option value="intermediate">中級者</option>
        <option value="advanced">上級者</option>
      </select>
    </div>
    <div class="form-row">
      <label>週回数</label>
      <select id="frequency">
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
      </select>
    </div>
    <div class="form-row">
      <label>時間（分）</label>
      <input id="duration" type="number">
    </div>
  </fieldset>
  <button onclick="goStep(1)">戻る</button>
  <button onclick="generateMenu()">無料でメニューを作る</button>
</div>

<div class="fixed-generate">
  <button onclick="generateMenu()">無料でメニューを作る</button>
</div>

<div id="result"></div>

<div class="ad-space">広告エリア</div>

<h2>過去に作成したメニュー</h2>
<div id="history"></div>

<!-- ===== 追加文章（そのまま） ===== -->

<section id="about">
  <h2>この筋トレメニュー自動生成ツールについて</h2>
  <p>
    このサイトは、目的や条件に応じて筋トレメニューを自動で作成できる
    無料のWebツールです。
    筋トレ初心者の方から、日々のメニュー作りを効率化したい方まで、
    幅広く利用できることを目的としています。
  </p>
  <p>
    特別な登録やログインは不要で、誰でもすぐに利用できます。
  </p>
</section>

<section id="faq">
  <h2>よくある質問</h2>
  <h3>Q. 利用料金はかかりますか？</h3>
  <p>A. 完全無料で利用できます。</p>
  <h3>Q. 筋トレ初心者でも使えますか？</h3>
  <p>A. はい。初心者の方でも無理のないメニューが生成される設計になっています。</p>
  <h3>Q. 毎日使っても問題ありませんか？</h3>
  <p>A. 問題ありませんが、体調や疲労度に応じて無理のない範囲でご利用ください。</p>
</section>

<section id="policy">
  <h2>免責事項・プライバシーポリシー</h2>
  <p>当サイトに掲載されている情報は一般的なトレーニング情報をもとに作成されています。</p>
  <p>利用によって生じたいかなる損害についても責任を負いかねます。</p>
  <p>今後Google AdSense等の広告を利用する可能性があります。</p>
</section>

<script>
function goStep(n){
  document.querySelectorAll(".step").forEach(s=>s.classList.remove("active"));
  document.getElementById("step"+n).classList.add("active");
}


/* ===== ここから下は【一切変更なし】 ===== */

const EXERCISES = {
  chest:{middle:[{name:"腕立て伏せ",tag:"star"},{name:"ベンチプレス",tag:"main"},{name:"ダンベルプレス",tag:"main"}],
  upper:[{name:"インクラインベンチプレス"},{name:"インクラインダンベルプレス"}],
  lower:[{name:"ケーブルクロスオーバー"},{name:"デクラインベンチプレス"}],
  stretch:[{name:"ペックフライ"},{name:"ダンベルフライ"}]},
  shoulder:{middle:[{name:"サイドレイズ",tag:"star"}],
  front:[{name:"フロントレイズ"},{name:"バーベルショルダープレス"},{name:"ダンベルショルダープレス"}],
  rear:[{name:"リアレイズ"},{name:"マシンリアレイズ"},{name:"ケーブルリアレイズ"}]},
  back:{upper:[{name:"懸垂",tag:"star"},{name:"ラットプルダウン"}],
  middle:[{name:"デッドリフト"}],
  lower:[{name:"ベントオーバーローイング"},{name:"ケーブルローイング"},{name:"マシンシーテッドロウ"},{name:"ダンベルローイング"}]},
  legs:{all:[{name:"スクワット",tag:"star"},{name:"バーベルスクワット",tag:"main"}],
  front:[{name:"レッグエクステンション"}],
  ham:[{name:"レッグカール"}]},
  arms:{biceps_contract:[{name:"バーベルアームカール"},{name:"ダンベルアームカール"}],
  biceps_stretch:[{name:"インクラインアームカール"}],
  triceps_contract:[{name:"プレスダウン"},{name:"ディップス"},{name:"ナローベンチプレス"}],
  triceps_stretch:[{name:"ケーブルフレンチプレス"},{name:"トライセプスエクステンション"}]},
  abs:[{name:"クランチ",tag:"star"},{name:"ハンギングレッグレイズ"},{name:"アブドミナルクランチ"},{name:"アブローラー"}]
};

function calcSets({ duration, gender, bmi, age }) {
  let sets = duration <= 30 ? 2 : 3;
  if (gender === "male") sets += 1;
  if (bmi > 25) sets += 1;
  if (age >= 60) sets -= 1;
  return Math.max(2, sets);
}

function hashCode(str){let h=0;for(let i=0;i<str.length;i++){h=((h<<5)-h)+str.charCodeAt(i);h|=0;}return Math.abs(h);}
function seededRandom(seed){const x=Math.sin(seed)*10000;return x-Math.floor(x);}
function pickOneSeeded(list,seed){return list[Math.floor(seededRandom(seed)*list.length)];}
function pickNSeeded(list,n,seed){const copy=[...list],res=[];let s=seed;while(res.length<n&&copy.length){const idx=Math.floor(seededRandom(s++)*copy.length);res.push(copy.splice(idx,1)[0]);}return res;}

function selectExercise(list,level,seed){if(level==="beginner"){return list.find(e=>e.tag==="star")||list[0];}
const filtered=list.filter(e=>e.tag!=="star");
return filtered.length===1?filtered[0]:pickOneSeeded(filtered,seed);}

function selectChest(level,seed){return[
selectExercise(EXERCISES.chest.middle,level,seed),
pickOneSeeded(EXERCISES.chest.upper,seed+1),
pickOneSeeded(EXERCISES.chest.lower,seed+2),
pickOneSeeded(EXERCISES.chest.stretch,seed+3)
];}

function selectShoulder(level,seed){return[
EXERCISES.shoulder.middle[0],
pickOneSeeded(EXERCISES.shoulder.front,seed+1),
pickOneSeeded(EXERCISES.shoulder.rear,seed+2)
];}

function selectBack(level,seed){return[
selectExercise(EXERCISES.back.upper,level,seed),
EXERCISES.back.middle[0],
pickOneSeeded(EXERCISES.back.lower,seed+1)
];}

function selectLegs(level,seed){return[
selectExercise(EXERCISES.legs.all,level,seed),
EXERCISES.legs.front[0],
EXERCISES.legs.ham[0]
];}

function selectArms(level,seed){return[
pickOneSeeded(EXERCISES.arms.biceps_contract,seed),
EXERCISES.arms.biceps_stretch[0],
pickOneSeeded(EXERCISES.arms.triceps_contract,seed+1),
pickOneSeeded(EXERCISES.arms.triceps_stretch,seed+2)
];}

function selectAbs(level,seed){
if(level==="beginner"){return[EXERCISES.abs[0],pickOneSeeded(EXERCISES.abs.slice(1),seed)];}
return pickNSeeded(EXERCISES.abs.slice(1),2,seed);
}

const split={
2:[["chest","back","arms"],["legs","abs"]],
3:[["chest","shoulder","abs"],["back","arms"],["legs","abs"]],
4:[["chest","abs"],["back"],["legs","abs"],["shoulder","arms"]],
5:[["chest","abs"],["back"],["shoulder","abs"],["legs"],["arms","abs"]]
};

function renderHistory(){
const history=JSON.parse(localStorage.getItem("trainingHistory")||"[]");
const container=document.getElementById("history");
container.innerHTML="";
history.forEach((h,i)=>{
const card=document.createElement("div");
card.className="history-card";
card.innerHTML=`
<div class="history-header">#${i+1} (${h.date}) / ${h.freq}回 / ${h.level}</div>
<div class="history-body">${h.output}</div>
<div class="history-actions">
<button onclick="reloadHistory(${i})">再読込</button>
<button onclick="deleteHistory(${i})">削除</button>
</div>`;
card.querySelector(".history-header").onclick=()=>card.classList.toggle("open");
container.appendChild(card);
});
}

function deleteHistory(i){
const history=JSON.parse(localStorage.getItem("trainingHistory")||"[]");
history.splice(i,1);
localStorage.setItem("trainingHistory",JSON.stringify(history));
renderHistory();
}

function reloadHistory(i){
const h=JSON.parse(localStorage.getItem("trainingHistory"))[i];
height.value=h.height;weight.value=h.weight;age.value=h.age;
gender.value=h.gender;level.value=h.level;
frequency.value=h.freq;duration.value=h.duration;
result.innerText=h.output;
}

function generateMenu(){
const heightVal=+height.value;
const weightVal=+weight.value;
const ageVal=+age.value;
const genderVal=gender.value;
const levelVal=level.value;
const freqVal=+frequency.value;
const durationVal=+duration.value;
const bmi=weightVal/((heightVal/100)**2);
const sets=calcSets({duration:durationVal,gender:genderVal,bmi,age:ageVal});
const seed=hashCode(`${heightVal}-${weightVal}-${ageVal}-${genderVal}-${levelVal}-${freqVal}-${durationVal}`);
result.innerHTML="";
split[freqVal].forEach((day,i)=>{
const card=document.createElement("div");
card.className="day-card";
card.innerHTML=`<h3>DAY ${i+1}</h3>`;
day.forEach(part=>{
card.innerHTML+=`<div class="part-title">${part.toUpperCase()}</div>`;
let list=[];
if(part==="chest")list=selectChest(levelVal,seed+i*10);
if(part==="shoulder")list=selectShoulder(levelVal,seed+i*10);
if(part==="back")list=selectBack(levelVal,seed+i*10);
if(part==="legs")list=selectLegs(levelVal,seed+i*10);
if(part==="arms")list=selectArms(levelVal,seed+i*10);
if(part==="abs")list=selectAbs(levelVal,seed+i*10);
list.forEach(e=>card.innerHTML+=`${e.name}：${sets}セット<br>`);
});
result.appendChild(card);
});
const history=JSON.parse(localStorage.getItem("trainingHistory")||"[]");
history.unshift({date:new Date().toLocaleString(),height:heightVal,weight:weightVal,age:ageVal,
gender:genderVal,level:levelVal,freq:freqVal,duration:durationVal,output:result.innerText});
localStorage.setItem("trainingHistory",JSON.stringify(history));
renderHistory();
}

window.addEventListener("DOMContentLoaded",renderHistory);
</script>

</body>
</html>
